<!DOCTYPE html>
<html>
    <head>
        <link href="{{ url_for('static', filename='css/login_page_ta.css')}}" rel="stylesheet" type="text/css">
        <script type="text/javascript" src="{{ url_for('static', filename='js/entrance.js')}}"></script>
        <!-- 移除了 #school_box 的樣式，因為不再需要 -->
    </head>

    <body>
        <div class="parent">
            <img id="back_img" src="{{ url_for('static', filename='Font/1x/ALL_NAV_BAR_BACK.png')}}">
            <img id="background_img" src="{{ url_for('static', filename='Font/1x/ALL_LOG_IN_TEACHER.png')}}">
            <div id = "login_div">

                <div id="login_form">
                    <!-- 帳號與密碼輸入框 -->
                    <input type="text" id="account_box" name="account" placeholder="帳號 (Email)"/><br><br>
                    <input type="password" id="pwd_box" name="pwd" placeholder="密碼"/><br><br>

                    <!-- 已移除學校輸入欄位 -->
                    
                    <p id="login_msg">&nbsp</p>
                    <input type="image" id="submit_btn" src="{{ url_for('static', filename='4GAME_ALL/ALL/1x/ALL_CONFIRM_B.png')}}" alt="Submit Form" />
                    
                    <p style="text-align:center; margin-top:10px;">
                        <a href="/register/ta"
                           style="color:#0055ff; text-decoration:none; font-size:16px; font-weight: bold;">
                          沒有帳號？點此註冊
                        </a>
                    </p>
                    
                </div>
            </div>
        </div>
    </body>

    <script src="/static/js/jquery-3.6.0.min.js"></script>
    <script>
        $("#back_img").click(function() {
            window.location.href = "/branch";
        });
        
        $(document).on('keypress',function(e) {
            if(e.which == 13) v();
        });
        $("#submit_btn").click(function() {
            v();
        });

        function v(){
            // 檢查必填 (只檢查帳號密碼)
            if(!$("#account_box").val() || !$("#pwd_box").val()) {
                $("#login_msg").text("*請完整填寫帳號與密碼*");
                return;
            }

            $.ajax({
                method: "POST",
                url: "/verifying",
                contentType: 'application/json',
                data: JSON.stringify({
                    account: $("#account_box").val(),
                    pwd: $("#pwd_box").val()
                    // 已移除 school 參數
                }),
                dataType: "json",
            })
            .done(function(result) {
                console.log(result);
                if (result["status"] == "success")
                    window.location.href = result["url"]
                else
                    $("#login_msg").text("*帳號或密碼錯誤*");
            })
            .fail(function() {
                $("#login_msg").text("*連線失敗，請稍後再試*");
            });
        }
    </script>
</html>